<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Type Ahead ðŸ‘€</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <form class="search-form">
    <input id="text-field" type="text" class="search" placeholder="City or State">
    <ul class="suggestions">
      <li>Filter for a city</li>
      <li>or a state</li>
    </ul>
  </form>
  <div id="text"></div>
<script>


const endpoint = 'https://gist.githubusercontent.com/Miserlou/c5cd8364bf9b2420bb29/raw/2bf258763cdddd704f8ffd3ea9a3e81d25e2c6f6/cities.json';
var textField = document.getElementById("text-field");
var dataToUse;

// GET DATA FROM WEBSITE
fetch(endpoint)
.then(response => response.json())
.then(
  data => dataToUse = data
  );

// GET DATA FROM INPUT FIELD
document.getElementById("text-field").addEventListener("input",
() => {
  var regex = new RegExp(textField.value, "ig");

  dataToUse.filter((x) => { 
    if(regex.test(x.city) || regex.test(x.state)){
      document.getElementsByClassName("suggestions")[0].innerHTML += 
      `<li>${x.city}, ${x.state}<span class="population">${x.population}</span></li>`;
    }
  });
});

</script>
</body>
</html>
